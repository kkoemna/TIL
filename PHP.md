# PHPの特徴
- Webアプリケーションの開発に適している
- HTMLに埋め込むことができる
- 動的にWebページを作成する機能を数多く備える
- ブログサービスなどを設置できるWordPressはPHPで作られている

# メッセージの表示
コードの記述方法は以下のとおり`<>`と`?`で全体を囲み、phpのコードである旨の宣言が必要。<br>
また、コードの行末に「;（セミコロン）」が必要。

```php
<?php
    #ここにコードを記述する;
?>
```

データを表示させる命令である`echoメソッド`を使用してメッセージを表示する。Rubyにおけるputsメソッドと同じ働き。

```php
<?php
    echo "Hello World";
?>
```

複数行のコードは上から順番に実行する。<br>
ただし、`echo`だけでは改行しないため、改行するには`\n`を付け加える。「\（バックスラッシュ）」の入力方法は`option + ¥`。

```php
<?php
    echo "Hello paiza\n";
    echo "Hello paiza";
?>
```

# コメントを書く
コードの頭に`#`を付けることで、その行はコメントになり、プログラムの実行に影響しなくなる。

```php
<?php
    # コメントを書く
    echo "Hello World";
?>
```
`#`の代わりに`//`を使用することもできる。

```php
<?php
    // コメントを書く
    echo "Hello World";
?>
```
また、`/* */`で囲むことでもコメントとして扱うことができる。複数行にまたがる記述の場合はこちらが便利。

```php
<?php
    /* コメントを書く
    コメントを書く */
    echo "Hello World";
?>
```

# 変数
PHPの変数は、頭に`$`を付ける。

```php
<?php
    $greeting = "Hello world";
    echo $greeting;
?>

# Hello world
```

また、変数名の命名については以下のような決まりがある。
- 1文字目：アルファベット、アンダーバー
- 2文字目以降：アルファベット、アンダーバー、数字
- 慣習として日本語(全角)で書かない
- 慣習として小文字にする

# 文字列の連結
文字列同士を連結させたい場合は、`.`でつなぐ。

```php
<?php
    $name = "kkoemna";
    echo $name . "さん、冒険にようこそ";
?>

# kkoemnaさん、冒険にようこそ
```

# データを受け取る
以下のコードにより、プログラムの実行時にデータを受け取る。

```php
trim(fgets(STDIN))
```

- trim関数：データの前後にある空白や改行を削除して整える
- fgets関数：指定した場所から1行のデータを受け取る
- STDIN：標準入力を表す

```php
<?php
    $name = trim(fgets(STDIN));
    echo "Hello " . $name;
?>
```

上記コードでは、受け取ったデータを`$name`という変数に代入して、echoメソッドにより文字列「Hello」と連結して表示する。

また、文字列に限らず数値も同様のコードで受け取ることができる。

```php
<?php
    $number = trim(fgets(STDIN));
    echo $number * 10;
?>
```

# 条件分岐
## if文の基本
```php
<?php
    $name = trim(fgets(STDIN));

    if ($name == "PHP") {
        echo "Welcome\n";
    }
?>
```

上記は、`if文`を用いて、受け取ったデータが`PHP`と一致したら、`Welcome`と表示するプログラム。

Rubyと違い、`条件式を()内`に記述し、`条件式に一致する場合の処理を{}内`に記述する。

```php
<?php
    if (条件式) {
        条件式に一致する場合の処理;
    }
?>
```

## 比較演算子
比較演算子はRubyと同じ。

- `a == b` aはbと等しい
- `a != b` aはbと等しくない
- `a > b` aはbより大きい
- `a < b` aはbより小さい
- `a >= b` aはb以上
- `a <= b` aはb以下

## elseとelseif
### else
```php
<?php
    $name = trim(fgets(STDIN));
    echo "Hello " . $name . "\n";

    if ($name == "PHP") {
        echo "Welcome\n";
    } else {
        echo "Goodbye\n";
    }
?>
```

上記では、条件と一致しなかった場合、`Goodbye`と表示する。

条件と一致した場合の処理を{}で閉じたあと、`else`でつないで、条件と一致しなかった場合の処理を{}内に記述する。

### elseif
```php
<?php
    $name = trim(fgets(STDIN));
    echo "Hello ".$name."\n";

    if ($name == "PHP") {
        echo "Welcome\n";
    } elseif ($name == "php") {
        echo "Good morning\n";
    } else {
        echo "Goodbye\n";
    }
?>
```
上記では、変数`$name`が`php（小文字）`の場合、`Good morning`と表示する。

前条件の処理を{}で閉じたあと、`elseif`でつないで、新たな条件式を()内に記述し、それに一致する場合の処理を{}内に記述する。

# 繰り返し処理
## for文の基本
```php
<?php
    $greeting = "Hello world";
    for ($i = 0; $i < 5; $i++) {
        echo $greeting . "\n";
    }
?>
```

上記は、`for文`を用いて、$greeting（Hello worldが格納されている）を`5回`繰り返し表示するプログラム。

for文の構成は以下のとおり。

```php
<?php
    for (初期値; 繰り返し条件; 変化分) {
        繰り返したい処理;
    }
?>
```

先ほどの例を噛み砕いて説明すると、

```php
for ($i = 0; $i < 5; $i++)
```

「まず繰り返し処理に使う`$i`という変数を定義するよ。最初は`0`からカウントを始めて、`$i`が`5より小さい間`は処理を繰り返してね。繰り返すたび`$i`に`1ずつプラス`していってね。`$i`が`5を超えたら`繰り返し処理は終了だよ。」

という意味。

# Laravelの特徴
`Laravel`は2012年にリリースされた、PHPフレームワークの中では比較的若い部類。現在では世界中で圧倒的な使用率を誇る人気のフレームワーク。

## MVCフレームワーク
Laravelは、いわゆる`MVCフレームワーク`と呼ばれるもの。アプリケーションを`モデル`、`ビュー`、`コントローラー`の各機能に分けて整理し、これらのパーツを作ることで開発をおこなう。MVCはアプリケーションフレームワークで広く使われているアーキテクチャで、フレームワークを使うなら、MVCに準拠したものを選ぶべき。Rubyの`Ruby on Rails`もMVCフレームワーク。

## 低い学習コスト
Laravelの最大の特徴は、その低い学習コスト。非常にコードが分かりやすいため、習得のために多くの時間と労力を必要としない。非常に多くの機能を持つが、それらの実装はとても簡単。それでいて高品質のアプリケーションを作ることができる。

# Laravelの導入
`Laravel`を導入するには、いきなりLaravelをインストールするのではなく、以下の手順が必要。

1. PHPのインストール
2. Composerのインストール
3. Laravelのインストール

PHPは、以前のIntelCPUのmacには標準搭載されていたが、M1チップ搭載型以降のモデルには、手動でインストールしなければいけない。また、`Composer`とは、`PHPの依存性管理ツール`のこと。「このライブラリはこのライブラリが入ってないと動かない」といった依存性を管理する事で、問題なく動く環境を用意するのに必要となる。

# Laravelを使ってみる
## プロジェクトの作成
Laravelのプロジェクト作成は`ターミナル`からおこなう。プロジェクトを作成したいディレクトリに移動して、以下のプロジェクト作成コマンドを実行する。

```php
laravel new アプリ名
```

`laravel newコマンド`でプロジェクト（アプリケーション）を新規作成する。Railsのrails newコマンドと一緒。

## アプリケーションの実行
Laravelには、Webサーバー機能が内蔵されている。起動したいアプリケーションのディレクトリに移動して、以下のサーバー起動コマンドを実行する。

```php
php artisan serve
```
サーバー起動後、ローカルホスト8000にアクセスすると、Laravelアプリケーションのトップページが表示される。

```
http://localhost:8000
```

サーバー停止コマンドは`Ctrl + Cキー`。これもRailsと同じ。

# Bladeの構文
## 値の表示
値は以下のように`{{ }}`で囲んで埋め込む。

```php
{{ 値・変数・式・関数など }}
```

この表記では、基本的に`HTMLエスケープ処理`される。HTMLエスケープ処理とは、HTMLタグなどもテキストとして表示され、その機能を果たさないということ。

エスケープ処理してほしくない場合は、以下のように記述する。

```php
{!! 値・変数・式・関数など !!}
```

## @ifディレクティブ
```
@if (条件)
出力内容
@elseif (条件)
出力内容
@else
出力内容
@endif
```

## 特殊なディレクティブ
### 条件が非成立のときに表示
```
@unless (条件)
表示内容
@endunless
```

### 変数が空の場合に表示
```
@empty (変数)
表示内容
@endempty
```

### 変数が定義済みの場合に表示
```
@isset (変数)
表示内容
@endisset
```

## @forディレクティブ
@forディレクティブは、PHPのfor文と同じように繰り返し処理をおこなうための構文。

```
@for (初期化; 条件; 後処理)
繰り返す表示内容
@endfor
```

例えば、以下のように記述すると、0から9までの数字を表示する。

```
@for ($i = 0; $i < 10; $i++)
    <p>{{ $i }}</p>
@endfor

```

## @includeディレクティブ
`@includeディレクティブ`は、Bladeテンプレートの中で別のBladeテンプレートを読み込むことができるディレクティブ。@includeディレクティブには、読み込むテンプレートの名前を指定する。例えば、@include(‘layouts.header’)というディレクティブは、resources/views/layouts/header.blade.phpというファイルを読み込む。

# ミドルウェア
Laravelにおけるミドルウェアは、コントローラーがアクションを呼び出す前や後に割り込んで指定の処理を実行するプログラムのこと。ユーザー認証やアクセス権限の確認、入力されたデータの検証などをおこなう。

作成にはターミナルで以下のコマンドを実行する。

```php
php artisan make:middleware ミドルウェア名
```

# グローバルミドルウェア
Laravelにおけるグローバルミドルウェアは、アプリケーションのすべてのリクエストに対して、共通の処理をはさみ込む仕組み。認証やログ出力など、アプリケーション全体で必要な処理を実行するために使用する。

`app/Http/Kernel.php`ファイル内の、変数`$middleware`内に記述する。
